webpackJsonp([1],{AERm:function(t,e){},ARgf:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("/5sW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("transition",{attrs:{name:"el-fade-in",mode:"out-in"}},[e("router-view")],1)],1)},staticRenderFns:[]};var s=n("VU/8")({name:"App"},r,!1,function(t){n("kj0M")},null,null).exports,i=n("/ocq"),o=n("Xxa5"),c=n.n(o),l=n("exGp"),u=n.n(l),d=n("mtWM"),p=n.n(d),f={data:function(){return{key:""}},methods:{warnning:function(t){this.$notify({title:"提示",message:t,type:"warning"})},login:function(){var t=this;return u()(c.a.mark(function e(){var n,a,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("/login",{key:t.key});case 3:if(n=e.sent,a=n.data,a.data,r=a.msg,!a.status){e.next=11;break}return t.$router.push("/backstage"),e.abrupt("return");case 11:t.warnning(r),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}},e,t,[[0,14]])}))()},checkLogin:function(){var t=this;return u()(c.a.mark(function e(){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("/login/check");case 3:if(n=e.sent,!n.data.status){e.next=8;break}return t.$router.push("/backstage"),e.abrupt("return");case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}},e,t,[[0,10]])}))()}},mounted:function(){this.checkLogin()}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"login"}},[n("div",{staticClass:"title"},[t._v("Any Page")]),t._v(" "),n("el-row",[n("el-col",{attrs:{span:19}},[n("div",[n("el-input",{attrs:{placeholder:"key"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.login(e):null}},model:{value:t.key,callback:function(e){t.key=e},expression:"key"}})],1)]),t._v(" "),n("el-col",{attrs:{span:5}},[n("div",[n("el-button",{staticClass:"loginBtn",attrs:{type:"primary"},on:{click:t.login}},[n("i",{staticClass:"fa fa-angle-right"})])],1)])],1)],1)},staticRenderFns:[]};var m=n("VU/8")(f,v,!1,function(t){n("AERm")},"data-v-23550c64",null).exports,g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"backstage"}},[n("nav",[n("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.active,mode:"horizontal"}},[n("el-menu-item",{attrs:{index:"-1"},on:{click:function(e){t.to("Sites")}}},[n("div",{staticClass:"title"},[t._v("Any Page")])]),t._v(" "),n("el-menu-item",{attrs:{index:"Upload"},on:{click:function(e){t.to("Upload")}}},[t._v("添加站点")]),t._v(" "),n("el-menu-item",{attrs:{index:"Management"},on:{click:function(e){t.to("Management")}}},[t._v("站点管理")]),t._v(" "),n("el-menu-item",{attrs:{index:"Keys"},on:{click:function(e){t.to("Keys")}}},[t._v("密钥管理")])],1)],1),t._v(" "),n("div",{attrs:{id:"container"}},[n("transition",{attrs:{name:"el-fade-in",mode:"out-in"}},[n("router-view")],1)],1)])},staticRenderFns:[]};var h=n("VU/8")({data:function(){return{active:"1"}},methods:{to:function(t){this.$router.push({name:t})}},mounted:function(){this.active=this.$route.name}},g,!1,function(t){n("gXrF")},"data-v-63de2602",null).exports,k={data:function(){return{siteConfig:[{config:"title",desc:"站点名称"},{config:"route",desc:"路由"},{config:"cover",desc:"封面"},{config:"desc",desc:"描述"}],addData:{title:"",route:"",cover:"",desc:"",useConfig:!0},haveFile:!1}},methods:{success:function(t){this.$notify({title:"成功",message:t,type:"success"})},warnning:function(t){this.$notify({title:"提示",message:t,type:"warning"})},doUpload:function(t){if("zip"!==t.name.split(".").pop())return this.warnning("必须为 .zip 文件"),!1},submit:function(){this.$refs.upload.submit()},onSuccess:function(t){var e=t.data,n=t.msg;t.status?this.success("添加成功 路由为 "+e.route):this.warnning(n)},onError:function(t){console.log(t)}}},b={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"upload"}},[n("el-card",[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("添加站点")])]),t._v(" "),n("el-form",{ref:"form",attrs:{model:t.addData,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"上传文件"}},[n("el-upload",{ref:"upload",attrs:{name:"site",action:"/admin/create/site",drag:"",data:t.addData,"auto-upload":!1,"before-upload":t.doUpload,"with-credentials":"","on-success":t.onSuccess,"on-error":t.onError}},[n("i",{staticClass:"el-icon-upload"}),t._v(" "),n("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),n("em",[t._v("点击上传")])]),t._v(" "),n("div",{staticClass:"el-upload__tip",staticStyle:{margin:"0"},attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传zip格式压缩包")])])],1),t._v(" "),n("el-form-item",{attrs:{label:"使用配置文件"}},[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.addData.useConfig,callback:function(e){t.$set(t.addData,"useConfig",e)},expression:"addData.useConfig"}})],1),t._v(" "),n("el-collapse-transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.addData.useConfig,expression:"!addData.useConfig"}]},[n("el-form-item",{attrs:{label:"站点名称"}},[n("el-input",{model:{value:t.addData.title,callback:function(e){t.$set(t.addData,"title",e)},expression:"addData.title"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"路由"}},[n("el-input",{model:{value:t.addData.route,callback:function(e){t.$set(t.addData,"route",e)},expression:"addData.route"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"封面"}},[n("el-input",{attrs:{placeholder:"只能使用线上的图片地址"},model:{value:t.addData.cover,callback:function(e){t.$set(t.addData,"cover",e)},expression:"addData.cover"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"描述"}},[n("el-input",{model:{value:t.addData.desc,callback:function(e){t.$set(t.addData,"desc",e)},expression:"addData.desc"}})],1)],1)]),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("添加站点")])],1)],1)],1),t._v(" "),n("el-card",{staticStyle:{margin:"20px 0"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("site.josn说明")])]),t._v(" "),n("p",{staticStyle:{"margin-bottom":"10px"}},[n("code",[t._v("site.json")]),t._v(" 文件可以放在压缩包的根目录，存放着站点配置信息。使用 "),n("code",[t._v("site.json")]),t._v(" 可以在添加站点的时候不需要填写表单信息。\n    ")]),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.siteConfig,border:""}},[n("el-table-column",{attrs:{prop:"config",label:"配置项"}}),t._v(" "),n("el-table-column",{attrs:{prop:"desc",label:"描述"}})],1)],1)],1)},staticRenderFns:[]};var y=n("VU/8")(k,b,!1,function(t){n("ARgf")},"data-v-1a578cca",null).exports,_={data:function(){return{sites:[]}},methods:{getSites:function(){var t=this;return u()(c.a.mark(function e(){var n,a,r,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("/common/sites");case 3:if(n=e.sent,a=n.data,r=a.data,s=a.msg,a.status){e.next=11;break}return t.warnning(s),e.abrupt("return");case 11:if(0!==r.length){e.next=14;break}return t.warnning("没有数据"),e.abrupt("return");case 14:t.sites=r.sites,e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),t.warnning("加载失败");case 20:case"end":return e.stop()}},e,t,[[0,17]])}))()},go:function(t){location.href=t},del:function(t,e){var n=this;return u()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.$confirm("确定删除吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(u()(c.a.mark(function e(){var a,r,s,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("/admin/delete/site",{id:t});case 3:if(a=e.sent,r=a.data,r.data,s=r.msg,!r.status){e.next=13;break}return i=n.sites.findIndex(function(e){return e.folderName===t}),console.log(i),-1!==i&&n.sites.splice(i,1),e.abrupt("return");case 13:n.warnning(s),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),n.warnning("删除失败");case 19:case"end":return e.stop()}},e,n,[[0,16]])}))).catch(function(){});case 1:case"end":return e.stop()}},e,n)}))()},warnning:function(t){this.$notify({title:"成功",message:t,type:"success"})}},mounted:function(){this.getSites()}},x={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"management"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.sites,border:""}},[n("el-table-column",{attrs:{prop:"title",label:"站点名称"}}),t._v(" "),n("el-table-column",{attrs:{label:"路由"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{attrs:{href:e.row.route}},[t._v(t._s(e.row.route))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"desc",label:"描述"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.del(e.row.folderName)}}},[t._v("删除")])]}}])})],1)],1)},staticRenderFns:[]},w=n("VU/8")(_,x,!1,null,null,null).exports,$={data:function(){return{sites:[]}},methods:{toLogin:function(){this.$router.push({name:"Login"})},getSites:function(){var t=this;return u()(c.a.mark(function e(){var n,a,r,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("/common/sites");case 3:if(n=e.sent,a=n.data,r=a.data,s=a.msg,a.status){e.next=11;break}return t.warnning(s),e.abrupt("return");case 11:if(0!==r.length){e.next=14;break}return t.warnning("没有数据"),e.abrupt("return");case 14:t.sites=r.sites,e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),t.warnning("加载失败");case 20:case"end":return e.stop()}},e,t,[[0,17]])}))()},go:function(t){open(t)},warnning:function(t){this.$notify({title:"提示",message:t,type:"warning"})}},mounted:function(){this.getSites()}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"sites"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.sites.length,expression:"!sites.length"}],attrs:{id:"tips"}},[n("el-alert",{attrs:{title:"消息",type:"warning",description:"暂无站点","show-icon":"",closable:!1}})],1),t._v(" "),n("el-row",t._l(t.sites,function(e,a){return n("el-col",{key:e.route,staticStyle:{"margin-top":"30px","margin-bottom":"30px"},attrs:{span:7,offset:a%3==0?0:1}},[n("el-card",{attrs:{"body-style":{padding:"0px"}}},[n("img",{staticClass:"image",attrs:{src:e.cover}}),t._v(" "),n("div",{staticStyle:{padding:"14px"}},[n("span",[t._v(t._s(e.title))]),t._v(" "),n("div",{staticClass:"bottom clearfix"},[n("time",{staticClass:"time"},[t._v(t._s(e.desc))]),t._v(" "),n("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(n){t.go(e.route)}}},[t._v("访问")])],1)])])],1)})),t._v(" "),n("div",{attrs:{id:"toLogin"},on:{click:t.toLogin}},[n("i",{staticClass:"el-icon-d-arrow-right"})])],1)},staticRenderFns:[]};var S=n("VU/8")($,C,!1,function(t){n("eR27")},"data-v-28ae9d0d",null).exports,D={data:function(){return{keys:[],key:""}},methods:{success:function(t){this.$notify({title:"成功",message:t,type:"success"})},warnning:function(t){this.$notify({title:"提示",message:t,type:"warning"})},add:function(){var t=this;return u()(c.a.mark(function e(){var n,a,r,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.key){e.next=3;break}return t.warnning("key不能为空"),e.abrupt("return");case 3:return e.prev=3,e.next=6,p.a.post("/admin/add/key",{key:t.key});case 6:if(n=e.sent,a=n.data,a.data,r=a.status,s=a.msg,!r){e.next=16;break}return t.keys.push(t.key),t.key="",t.success(s),e.abrupt("return");case 16:t.warnning(s),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),t.warnning("添加失败");case 22:case"end":return e.stop()}},e,t,[[3,19]])}))()},del:function(t){var e=this;return u()(c.a.mark(function n(){return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e.$confirm("确定删除吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(u()(c.a.mark(function n(){var a,r,s,i;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,p.a.post("/admin/delete/key",{key:t});case 3:a=n.sent,r=a.data,s=r.status,r.data,r.msg,s&&(e.success("删除成功"),-1!==(i=e.keys.findIndex(function(e){return e===t}))&&e.keys.splice(i,1),console.log(i)),n.next=13;break;case 11:n.prev=11,n.t0=n.catch(0);case 13:case"end":return n.stop()}},n,e,[[0,11]])}))).catch(function(){});case 1:case"end":return n.stop()}},n,e)}))()},getKeys:function(){var t=this;return u()(c.a.mark(function e(){var n,a,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("/admin/get/keys");case 3:n=e.sent,a=n.data,r=a.data,a.status,a.msg,t.keys=r.keys,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t.warnning("获取失败");case 14:case"end":return e.stop()}},e,t,[[0,11]])}))()}},mounted:function(){this.getKeys()}},R={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"keys"}},[n("el-card",{staticClass:"box-card",staticStyle:{"margin-bottom":"30px"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("添加key")])]),t._v(" "),n("div",[n("el-input",{attrs:{placeholder:"key"},model:{value:t.key,callback:function(e){t.key=e},expression:"key"}}),t._v(" "),n("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary"},on:{click:t.add}},[t._v("添加")])],1)]),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.keys,border:""}},[n("el-table-column",{attrs:{label:"密钥"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row)+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.del(e.row)}}},[t._v("删除")])]}}])})],1)],1)},staticRenderFns:[]},E=n("VU/8")(D,R,!1,null,null,null).exports;a.default.use(i.a);var U=new i.a({routes:[{path:"/",redirect:"/sites"},{path:"/login",name:"Login",component:m},{path:"/sites",name:"Sites",component:S},{path:"/backstage",name:"BackStage",redirect:"/backstage/upload",component:h,children:[{path:"upload",name:"Upload",component:y},{path:"management",name:"Management",component:w},{path:"keys",name:"Keys",component:E}]}]}),F=n("zL8q"),L=n.n(F);n("tvR6"),n("e0XP");a.default.config.productionTip=!1,a.default.use(L.a),new a.default({el:"#app",router:U,render:function(t){return t(s)}})},e0XP:function(t,e){},eR27:function(t,e){},gXrF:function(t,e){},kj0M:function(t,e){},tvR6:function(t,e){}},["NHnr"]);