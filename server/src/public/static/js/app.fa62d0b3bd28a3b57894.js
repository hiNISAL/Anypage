webpackJsonp([1],{"+aUE":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("/5sW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("transition",{attrs:{name:"el-fade-in",mode:"out-in"}},[e("router-view")],1)],1)},staticRenderFns:[]};var s=a("VU/8")({name:"App"},r,!1,function(t){a("p2uE")},null,null).exports,i=a("/ocq"),o=a("Xxa5"),c=a.n(o),l=a("exGp"),u=a.n(l),d=a("mtWM"),p=a.n(d),f={data:function(){return{key:""}},methods:{warnning:function(t){this.$notify({title:"提示",message:t,type:"warning"})},login:function(){var t=this;return u()(c.a.mark(function e(){var a,n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("/login",{key:t.key});case 3:if(a=e.sent,n=a.data,n.data,r=n.msg,!n.status){e.next=11;break}return t.$router.push("/backstage"),e.abrupt("return");case 11:t.warnning(r),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}},e,t,[[0,14]])}))()},checkLogin:function(){var t=this;return u()(c.a.mark(function e(){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("/login/check");case 3:if(a=e.sent,!a.data.status){e.next=8;break}return t.$router.push("/backstage"),e.abrupt("return");case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}},e,t,[[0,10]])}))()}},mounted:function(){this.checkLogin()}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"login"}},[a("div",{staticClass:"title"},[t._v("Any Page")]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:19}},[a("div",[a("el-input",{attrs:{placeholder:"key"},model:{value:t.key,callback:function(e){t.key=e},expression:"key"}})],1)]),t._v(" "),a("el-col",{attrs:{span:5}},[a("div",[a("el-button",{staticClass:"loginBtn",attrs:{type:"primary"},on:{click:t.login}},[a("i",{staticClass:"fa fa-angle-right"})])],1)])],1)],1)},staticRenderFns:[]};var m=a("VU/8")(f,v,!1,function(t){a("WlKw")},"data-v-1e281cb7",null).exports,g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"backstage"}},[a("nav",[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.active,mode:"horizontal"}},[a("el-menu-item",{attrs:{index:"-1"},on:{click:function(e){t.to("Sites")}}},[a("div",{staticClass:"title"},[t._v("Any Page")])]),t._v(" "),a("el-menu-item",{attrs:{index:"Upload"},on:{click:function(e){t.to("Upload")}}},[t._v("添加站点")]),t._v(" "),a("el-menu-item",{attrs:{index:"Management"},on:{click:function(e){t.to("Management")}}},[t._v("站点管理")]),t._v(" "),a("el-menu-item",{attrs:{index:"Keys"},on:{click:function(e){t.to("Keys")}}},[t._v("密钥管理")])],1)],1),t._v(" "),a("div",{attrs:{id:"container"}},[a("transition",{attrs:{name:"el-fade-in",mode:"out-in"}},[a("router-view")],1)],1)])},staticRenderFns:[]};var h=a("VU/8")({data:function(){return{active:"1"}},methods:{to:function(t){this.$router.push({name:t})}},mounted:function(){this.active=this.$route.name}},g,!1,function(t){a("+aUE")},"data-v-63de2602",null).exports,k={data:function(){return{siteConfig:[{config:"title",desc:"站点名称"},{config:"route",desc:"路由"},{config:"cover",desc:"封面"},{config:"desc",desc:"描述"}],addData:{title:"",route:"",cover:"",desc:"",useConfig:!0},haveFile:!1}},methods:{success:function(t){this.$notify({title:"成功",message:t,type:"success"})},warnning:function(t){this.$notify({title:"提示",message:t,type:"warning"})},doUpload:function(t){if("zip"!==t.name.split(".").pop())return this.warnning("必须为 .zip 文件"),!1},submit:function(){this.$refs.upload.submit()},onSuccess:function(t){var e=t.data,a=t.msg;t.status?this.success("添加成功 路由为 "+e.route):this.warnning(a)},onError:function(t){console.log(t)}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"upload"}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("添加站点")])]),t._v(" "),a("el-form",{ref:"form",attrs:{model:t.addData,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"上传文件"}},[a("el-upload",{ref:"upload",attrs:{name:"site",action:"/admin/create/site",drag:"",data:t.addData,"auto-upload":!1,"before-upload":t.doUpload,"with-credentials":"","on-success":t.onSuccess,"on-error":t.onError}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),t._v(" "),a("div",{staticClass:"el-upload__tip",staticStyle:{margin:"0"},attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传zip格式压缩包")])])],1),t._v(" "),a("el-form-item",{attrs:{label:"使用配置文件"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.addData.useConfig,callback:function(e){t.$set(t.addData,"useConfig",e)},expression:"addData.useConfig"}})],1),t._v(" "),a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.addData.useConfig,expression:"!addData.useConfig"}]},[a("el-form-item",{attrs:{label:"站点名称"}},[a("el-input",{model:{value:t.addData.title,callback:function(e){t.$set(t.addData,"title",e)},expression:"addData.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"路由"}},[a("el-input",{model:{value:t.addData.route,callback:function(e){t.$set(t.addData,"route",e)},expression:"addData.route"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"封面"}},[a("el-input",{attrs:{placeholder:"只能使用线上的图片地址"},model:{value:t.addData.cover,callback:function(e){t.$set(t.addData,"cover",e)},expression:"addData.cover"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{model:{value:t.addData.desc,callback:function(e){t.$set(t.addData,"desc",e)},expression:"addData.desc"}})],1)],1)]),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("添加站点")])],1)],1)],1),t._v(" "),a("el-card",{staticStyle:{margin:"20px 0"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("site.josn说明")])]),t._v(" "),a("p",{staticStyle:{"margin-bottom":"10px"}},[a("code",[t._v("site.json")]),t._v(" 文件可以放在压缩包的根目录，存放着站点配置信息。使用 "),a("code",[t._v("site.json")]),t._v(" 可以在添加站点的时候不需要填写表单信息。\n    ")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.siteConfig,border:""}},[a("el-table-column",{attrs:{prop:"config",label:"配置项"}}),t._v(" "),a("el-table-column",{attrs:{prop:"desc",label:"描述"}})],1)],1)],1)},staticRenderFns:[]};var _=a("VU/8")(k,b,!1,function(t){a("w31S")},"data-v-1a578cca",null).exports,y={data:function(){return{sites:[]}},methods:{getSites:function(){var t=this;return u()(c.a.mark(function e(){var a,n,r,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("/common/sites");case 3:if(a=e.sent,n=a.data,r=n.data,s=n.msg,n.status){e.next=11;break}return t.warnning(s),e.abrupt("return");case 11:if(0!==r.length){e.next=14;break}return t.warnning("没有数据"),e.abrupt("return");case 14:t.sites=r.sites,e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),t.warnning("加载失败");case 20:case"end":return e.stop()}},e,t,[[0,17]])}))()},go:function(t){location.href=t},del:function(t,e){var a=this;return u()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.$confirm("确定删除吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(u()(c.a.mark(function e(){var n,r,s,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("/admin/delete/site",{id:t});case 3:if(n=e.sent,r=n.data,r.data,s=r.msg,!r.status){e.next=13;break}return i=a.sites.findIndex(function(e){return e.folderName===t}),console.log(i),-1!==i&&a.sites.splice(i,1),e.abrupt("return");case 13:a.warnning(s),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),a.warnning("删除失败");case 19:case"end":return e.stop()}},e,a,[[0,16]])}))).catch(function(){});case 1:case"end":return e.stop()}},e,a)}))()},warnning:function(t){this.$notify({title:"成功",message:t,type:"success"})}},mounted:function(){this.getSites()}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"management"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.sites,border:""}},[a("el-table-column",{attrs:{prop:"title",label:"站点名称"}}),t._v(" "),a("el-table-column",{attrs:{label:"路由"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{attrs:{href:e.row.route}},[t._v(t._s(e.row.route))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"desc",label:"描述"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.del(e.row.folderName)}}},[t._v("删除")])]}}])})],1)],1)},staticRenderFns:[]},w=a("VU/8")(y,x,!1,null,null,null).exports,$={data:function(){return{sites:[]}},methods:{toLogin:function(){this.$router.push({name:"Login"})},getSites:function(){var t=this;return u()(c.a.mark(function e(){var a,n,r,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("/common/sites");case 3:if(a=e.sent,n=a.data,r=n.data,s=n.msg,n.status){e.next=11;break}return t.warnning(s),e.abrupt("return");case 11:if(0!==r.length){e.next=14;break}return t.warnning("没有数据"),e.abrupt("return");case 14:t.sites=r.sites,e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),t.warnning("加载失败");case 20:case"end":return e.stop()}},e,t,[[0,17]])}))()},go:function(t){location.href=t},warnning:function(t){this.$notify({title:"提示",message:t,type:"warning"})}},mounted:function(){this.getSites()}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"sites"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.sites.length,expression:"!sites.length"}],attrs:{id:"tips"}},[a("el-alert",{attrs:{title:"消息",type:"warning",description:"暂无站点","show-icon":"",closable:!1}})],1),t._v(" "),a("el-row",t._l(t.sites,function(e,n){return a("el-col",{key:e.route,staticStyle:{"margin-top":"30px","margin-bottom":"30px"},attrs:{span:7,offset:n%3==0?0:1}},[a("el-card",{attrs:{"body-style":{padding:"0px"}}},[a("img",{staticClass:"image",attrs:{src:e.cover}}),t._v(" "),a("div",{staticStyle:{padding:"14px"}},[a("span",[t._v(t._s(e.title))]),t._v(" "),a("div",{staticClass:"bottom clearfix"},[a("time",{staticClass:"time"},[t._v(t._s(e.desc))]),t._v(" "),a("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(a){t.go(e.route)}}},[t._v("访问")])],1)])])],1)})),t._v(" "),a("div",{attrs:{id:"toLogin"},on:{click:t.toLogin}},[a("i",{staticClass:"el-icon-d-arrow-right"})])],1)},staticRenderFns:[]};var S=a("VU/8")($,C,!1,function(t){a("sE5r")},"data-v-008eeb61",null).exports,D={data:function(){return{keys:[],key:""}},methods:{success:function(t){this.$notify({title:"成功",message:t,type:"success"})},warnning:function(t){this.$notify({title:"提示",message:t,type:"warning"})},add:function(){var t=this;return u()(c.a.mark(function e(){var a,n,r,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.key){e.next=3;break}return t.warnning("key不能为空"),e.abrupt("return");case 3:return e.prev=3,e.next=6,p.a.post("/admin/add/key",{key:t.key});case 6:if(a=e.sent,n=a.data,n.data,r=n.status,s=n.msg,!r){e.next=16;break}return t.keys.push(t.key),t.key="",t.success(s),e.abrupt("return");case 16:t.warnning(s),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),t.warnning("添加失败");case 22:case"end":return e.stop()}},e,t,[[3,19]])}))()},del:function(t){var e=this;return u()(c.a.mark(function a(){var n,r,s,i;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,p.a.post("/admin/delete/key",{key:t});case 3:n=a.sent,r=n.data,s=r.status,r.data,r.msg,s&&(e.success("删除成功"),-1!==(i=e.keys.findIndex(function(e){return e===t}))&&e.keys.splice(i,1),console.log(i)),a.next=13;break;case 11:a.prev=11,a.t0=a.catch(0);case 13:case"end":return a.stop()}},a,e,[[0,11]])}))()},getKeys:function(){var t=this;return u()(c.a.mark(function e(){var a,n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("/admin/get/keys");case 3:a=e.sent,n=a.data,r=n.data,n.status,n.msg,t.keys=r.keys,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t.warnning("获取失败");case 14:case"end":return e.stop()}},e,t,[[0,11]])}))()}},mounted:function(){this.getKeys()}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"keys"}},[a("el-card",{staticClass:"box-card",staticStyle:{"margin-bottom":"30px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("添加key")])]),t._v(" "),a("div",[a("el-input",{attrs:{placeholder:"key"},model:{value:t.key,callback:function(e){t.key=e},expression:"key"}}),t._v(" "),a("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary"},on:{click:t.add}},[t._v("添加")])],1)]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.keys,border:""}},[a("el-table-column",{attrs:{label:"密钥"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.del(e.row)}}},[t._v("删除")])]}}])})],1)],1)},staticRenderFns:[]},U=a("VU/8")(D,E,!1,null,null,null).exports;n.default.use(i.a);var R=new i.a({routes:[{path:"/",redirect:"/sites"},{path:"/login",name:"Login",component:m},{path:"/sites",name:"Sites",component:S},{path:"/backstage",name:"BackStage",redirect:"/backstage/upload",component:h,children:[{path:"upload",name:"Upload",component:_},{path:"management",name:"Management",component:w},{path:"keys",name:"Keys",component:U}]}]}),F=a("zL8q"),L=a.n(F);a("tvR6"),a("e0XP");n.default.config.productionTip=!1,n.default.use(L.a),new n.default({el:"#app",router:R,render:function(t){return t(s)}})},WlKw:function(t,e){},e0XP:function(t,e){},p2uE:function(t,e){},sE5r:function(t,e){},tvR6:function(t,e){},w31S:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.fa62d0b3bd28a3b57894.js.map